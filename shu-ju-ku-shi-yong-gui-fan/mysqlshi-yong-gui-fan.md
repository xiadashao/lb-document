## MYSQL使用规范

### 一、**表设计**

```
1、库名取值要与服务业务模块名称对应,具体是公司简拼+模块名称,例如TMS服务，数据库为lb_tms。
2、表取值为公司简拼+模块名称+具体业务表名,例如财务服务账号，数据库为lb_finance_account。
3、表和字段名一定要规范的加上注释，方便后期维护。
4、库名、表名、字段名必须使用小写字母，“_”分割。
5、库名、表名、字段名不超过20个字符。
6、库名、表名、字段名见名知意,建议使用名词而不是动词。
7、整形定义中不添加长度，比如使用INT，而不是INT(4)。
8、VARCHAR(N)，N表示的是字符数不是字节数，比如VARCHAR(255)，可以最大可存储255个汉字，需要根据实际的宽度来选择N，N尽可能小。
9、表字符集选择UTF8。
10、建议字段定义为NOT NULL。
11、禁止在数据库中使用VARBINARY、BLOB存储图片、文件等。
12、存储日期使用DATE类型。
13、存储时间（精确到秒）建议使用TIMESTAMP类型，因为TIMESTAMP使用4字节，DATETIME使用8个字节。
14、表结构变更及时通知夏康维护线上表。
```

### 二、索引

```
1、非唯一索引必须按照“idx_字段名称_字段名称[_字段名]”进行命名。
2、唯一索引必须按照“uniq_字段名称_字段名称[_字段名]”进行命名。
3、索引名称必须使用小写。
4、ORDER BY，GROUP BY，DISTINCT的字段需要添加在索引的后面
5、UPDATE、DELETE语句需要根据WHERE条件添加索引。
6、不建议使用%前缀模糊查询，例如LIKE “%weibo”。
7、合理创建联合索引（避免冗余），(a,b,c) 相当于 (a) 、(a,b) 、(a,b,c)。
```

#### **三、 SQL语句**

```
1、SQL语句中IN包含的值不应过多。
2、WHERE条件中必须使用合适的类型，避免MySQL进行隐式类型转化。
3、SELECT语句只获取需要的字段 。
4、SELECT、INSERT语句必须显式的指明字段名称，不使用SELECT *，不使用INSERTINTO table()。
5、WHERE条件中的非等值条件（IN、BETWEEN、<、<=、>、>=）会导致后面的条件使用不了索引。
6、避免在SQL语句进行数学运算或者函数运算，容易将业务逻辑和DB耦合在一起
7、使用合理的SQL语句减少与数据库的交互次数。
8、统计表中记录数时使用COUNT(*)，而不是COUNT(primary_key)和COUNT(1)。
```



